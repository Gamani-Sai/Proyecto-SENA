package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import Controlador.ControladorElemento;
import Controlador.RegistarPrestamo;
import java.util.Date;
import java.text.SimpleDateFormat;

public final class registarprestamo_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");

    HttpSession sesionOk = request.getSession();
    String usuario = "";
    int id_cuenta = 0;
    if (sesionOk.getAttribute("usuario") != null && sesionOk.getAttribute("Id_cuenta") != null) {
        usuario = sesionOk.getAttribute("usuario").toString();
        id_cuenta = Integer.parseInt(sesionOk.getAttribute("Id_cuenta").toString());
    } else {
        response.sendRedirect("index.jsp");
    }

      out.write("\r\n");
      out.write("\r\n");

    java.util.Date Fecha = new java.util.Date();
    SimpleDateFormat Formato = new SimpleDateFormat("yyyy-MM-dd");

      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<!DOCTYPE>\r\n");
      out.write("<html>\r\n");
      out.write("    <head>\r\n");
      out.write("        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("        <meta name=\"keywords\" content=\"jquery,ui,easy,easyui,web\">\r\n");
      out.write("        <meta name=\"description\" content=\"easyui help you build your web page easily!\">\r\n");
      out.write("        <meta http-equiv=\"Cache-control\" content=\"no-cache\">\r\n");
      out.write("        <meta http-equiv=\"Cache-control\" content=\"no-store\">\r\n");
      out.write("        <title>IEGAMAR</title>\r\n");
      out.write("        <link rel=\"stylesheet\" type=\"text/css\" href=\"css/easyui.css\">\r\n");
      out.write("        <link rel=\"stylesheet\" type=\"text/css\" href=\"css/icon.css\">\r\n");
      out.write("        <link href=\"bootstrap/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n");
      out.write("        <link href=\"css/dashboard.css\" rel=\"stylesheet\">\r\n");
      out.write("        <link href=\"css/select2.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n");
      out.write("        <link href=\"css/select2-bootstrap.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n");
      out.write("        <link href=\"css/formulario.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n");
      out.write("        <link href=\"css/style_light.css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n");
      out.write("\r\n");
      out.write("    </head>\r\n");
      out.write("    <body onload=\"mueveReloj()\">\r\n");
      out.write("\r\n");
      out.write("        <nav class=\"navbar navbar-default navbar-fixed-top\" role=\"navigation\">\r\n");
      out.write("            <div class=\"container\">\r\n");
      out.write("                <div class=\"navbar-header\">\r\n");
      out.write("                    <a class=\"navbar-brand\" >IEGAMAR</a>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div id=\"navbar\" class=\"navbar-collapse collapse\">\r\n");
      out.write("                    <ul class=\"nav navbar-nav\">  \r\n");
      out.write("\r\n");
      out.write("                        ");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                        ");

                            ControladorElemento crt = new ControladorElemento();
                            out.println(crt.anomaliacont());
                        
      out.write("\r\n");
      out.write("\r\n");
      out.write("                        <li><a href=\"consultarcuentas.jsp\">Administar Cuentas</a></li>\r\n");
      out.write("                        <li><a href=\"registargradoygrupo.jsp\">Grados</a></li>\r\n");
      out.write("                        <li><a href=\"consultarestudiante.jsp\">Estudiantes</a></li>\r\n");
      out.write("                        <li><a href=\"consultarprofesores.jsp\">Profesores</a></li>\r\n");
      out.write("                        <li><a href=\"consultarelemento.jsp\">Elementos</a></li>\r\n");
      out.write("                        <li  class=\"active\"><a href=\"consultarprestamo.jsp\">Préstamo</a></li>\r\n");
      out.write("                        <li><a href=\"consultarreserva.jsp\">Reserva</a></li>  \r\n");
      out.write("                        <li ><a href=\"consultarcontrol.jsp\">Control de llegadas</a></li>                           \r\n");
      out.write("                    </ul>\r\n");
      out.write("                    <ul class=\"nav navbar-nav navbar-right\">\r\n");
      out.write("\r\n");
      out.write("                        <li class=\"active\"><a href=\"CerrarSesion.jsp\">Cerrar Sesión</a></li>\r\n");
      out.write("\r\n");
      out.write("                    </ul>\r\n");
      out.write("                </div><!--/.nav-collapse -->\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            <div hidden class=\"notification-list-wrapper\" id=\"objetivo\" style=\"top: 65px; left: 100px;  opacity: 1;\">\r\n");
      out.write("\r\n");
      out.write("                <ul class=\"notification-list-menu\">\r\n");
      out.write("                </ul>\r\n");
      out.write("\r\n");
      out.write("                <ul class=\"notification-list\" data-type=\"unread\">\r\n");
      out.write("\r\n");
      out.write("                    <table id=\"tblArea\" class=\"table2 table-hover\" cellspacing=\"0\" width=\"100%\">\r\n");
      out.write("                        <thead>\r\n");
      out.write("                            <tr>\r\n");
      out.write("                                <th class=\"text-center\">Seriales</th>\r\n");
      out.write("                                <th class=\"text-center\">Anomalia</th>\r\n");
      out.write("                            </tr>\r\n");
      out.write("                        </thead>\r\n");
      out.write("                        <tbody id=\"traer1\">\r\n");
      out.write("                            ");

                                out.println(crt.listaranom());
                            
      out.write("\r\n");
      out.write("                        </tbody>\r\n");
      out.write("                    </table>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                </ul>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <div class=\"modal fade bs-example-modal-sm\"  tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"mySmallModalLabel\" aria-hidden=\"true\">\r\n");
      out.write("                <div class=\"modal-dialog modal-sm\">\r\n");
      out.write("                    <div class=\"modal-content\">\r\n");
      out.write("                        <div class=\"modal-header\" >\r\n");
      out.write("                            <button type=\"button\" class=\"close\" data-dismiss=\"modal\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button>\r\n");
      out.write("                            <h4 class=\"modal-title\" id=\"myModalLabel\">Anomalia</h4>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        <div class=\"modal-body\"  >\r\n");
      out.write("                            <div class=\"form-group\">\r\n");
      out.write("                                <label for=\"disabledSelect\">Serial</label>\r\n");
      out.write("                                <input type=\"text\"  class=\"form-control\" name=\"Serial\" id=\"Serial\" readonly=\"readonly\" placeholder=\"\">\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"form-group\">\r\n");
      out.write("                                <label for=\"disabledSelect\">Descripción</label>\r\n");
      out.write("\r\n");
      out.write("                                <textarea rows=\"4\" name=\"Anomalia\" id=\"Anomalia\" cols=\"50\" class=\"form-control\" readonly=\"readonly\">\r\n");
      out.write("\r\n");
      out.write("                                </textarea>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                        <div class=\"modal-footer\">\r\n");
      out.write("                            <button type=\"button\" data-dismiss=\"modal\" onclick=\"list_anomalias();\"  class=\"btn btn-success\">Guardar</button>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("        </nav>\r\n");
      out.write("\r\n");
      out.write("        <div class=\"container-fluid\" id=\"formulario\">\r\n");
      out.write("            <div class=\"row\">\r\n");
      out.write("                <div class=\"col-sm-3 col-md-2 sidebar\">\r\n");
      out.write("                    <ul class=\"nav nav-sidebar\">\r\n");
      out.write("                        <li class=\"active\"><a href=\"registarprestamo.jsp\">Registar Préstamo</a></li>\r\n");
      out.write("                        <li><a href=\"consultarprestamo.jsp\">Consutar Préstamo</a></li>\r\n");
      out.write("                    </ul>\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("                <section class=\"container\">\r\n");
      out.write("                    <form role=\"form\" action=\"RegistarPrestamo\" method=\"POST\" name=\"form_reloj\" class=\"payment-form\">\r\n");
      out.write("                        <div class=\"container-page\">        \r\n");
      out.write("                            <div class=\"col-md-6\">\r\n");
      out.write("                                <h3 class=\"dark-grey\">Registro De Prestamo</h3>\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"radio col-lg-6\">\r\n");
      out.write("                                    <label>\r\n");
      out.write("                                        <input type=\"radio\" name=\"opciones\" value=\"Estudiante\" onchange=\"recibir()\" checked=\"recibir()\">\r\n");
      out.write("                                        Estudiante\r\n");
      out.write("                                    </label>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"radio col-lg-6\">\r\n");
      out.write("                                    <label>\r\n");
      out.write("                                        <input type=\"radio\" name=\"opciones\" value=\"Profesores\" onchange=\"recibir()\">\r\n");
      out.write("                                        Profesores                            \r\n");
      out.write("                                    </label>\r\n");
      out.write("                                </div>\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"form-group col-lg-12\">\r\n");
      out.write("                                    <label for=\"disabledSelect\" >Nombre</label>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"form-group col-lg-12\" id=\"traer\" >\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <div class=\"form-group col-lg-6\">\r\n");
      out.write("                                    <label for=\"disabledSelect\">Fecha Del Prestamo</label>\r\n");
      out.write("                                    <input type=\"text\" id=\"disabledTextInput\" class=\"form-control\" placeholder=\"\" name=\"Fecha\" readonly=\"readonly\" value=\"");
      out.print(Formato.format(Fecha));
      out.write("\">\r\n");
      out.write("                                </div>\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"form-group col-lg-6\">\r\n");
      out.write("                                    <label for=\"disabledSelect\">Hora</label>\r\n");
      out.write("                                    <input type=\"text\" id=\"disabledTextInput\" class=\"form-control\" placeholder=\"\" name=\"Hora\" readonly=\"readonly\" >\r\n");
      out.write("                                </div>\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"form-group col-lg-12\">\r\n");
      out.write("                                    <label for=\"disabledSelect\">Seriales</label>\r\n");
      out.write("                                    <select  id=\"selectSerial\" name=\"Seriales\">\r\n");
      out.write("                                        ");

                                            RegistarPrestamo vergrados = new RegistarPrestamo();
                                            out.println(vergrados.Seriales());
                                        
      out.write("\r\n");
      out.write("                                    </select>\r\n");
      out.write("                                    <button type=\"button\" class=\"btn btn-default preview-add-button\">\r\n");
      out.write("                                        <span class=\"glyphicon glyphicon-plus\"></span>Mas\r\n");
      out.write("                                    </button>     \r\n");
      out.write("                                </div> \r\n");
      out.write("                                <div class=\"form-group col-lg-12\">\r\n");
      out.write("                                    <table class=\"table2 preview-table\" id=\"tbl\">\r\n");
      out.write("                                        <thead>\r\n");
      out.write("                                            <tr>\r\n");
      out.write("                                                <th>Seriales</th>\r\n");
      out.write("                                            </tr>\r\n");
      out.write("                                        </thead>\r\n");
      out.write("                                        <tbody></tbody> <!-- preview content goes here-->\r\n");
      out.write("                                    </table>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                <button type=\"submit\" name=\"guardar\" value=\"insertar\" onclick=\"xd();\" class=\"btn btn-success\" style=\"margin-left: 360px;\">Guardar</button>\r\n");
      out.write("                                <input type=\"hidden\"  class=\"form-control2\" id=\"serial\" name=\"serial\" placeholder=\"\">\r\n");
      out.write("                                <button type=\"Reset\" class=\"btn btn-default\">Cancelar</button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </form>\r\n");
      out.write("                </section>\r\n");
      out.write("            </div>\r\n");
      out.write("            <script type=\"text/javascript\" src=\"js/jquery-1.6.min.js\"></script>\r\n");
      out.write("            <script src=\"bootstrap/js/bootstrap.js\"></script>\r\n");
      out.write("            <script src=\"js/select2.js\" type=\"text/javascript\"></script>\r\n");
      out.write("            <script src=\"js/ajax.js\" type=\"text/javascript\"></script>\r\n");
      out.write("            <script src=\"js/mapeomod.js\" type=\"text/javascript\"></script>\r\n");
      out.write("\r\n");
      out.write("            <script>\r\n");
      out.write("                                    $(\"#selectSerial\").select2({\r\n");
      out.write("                                        minimumInputLength: 2\r\n");
      out.write("                                    });\r\n");
      out.write("            </script>\r\n");
      out.write("\r\n");
      out.write("            <script language=\"JavaScript\">\r\n");
      out.write("                function mueveReloj() {\r\n");
      out.write("                    momentoActual = new Date()\r\n");
      out.write("                    hora = momentoActual.getHours()\r\n");
      out.write("                    minuto = momentoActual.getMinutes(\"mm\")\r\n");
      out.write("                    \r\n");
      out.write("                    horaImprimible = hora + \" : \" + minuto\r\n");
      out.write("\r\n");
      out.write("                    document.form_reloj.Hora.value = horaImprimible\r\n");
      out.write("\r\n");
      out.write("                    setTimeout(\"mueveReloj()\", 1000)\r\n");
      out.write("                }\r\n");
      out.write("            </script> \r\n");
      out.write("\r\n");
      out.write("            <script>\r\n");
      out.write("\r\n");
      out.write("                var actualizacion = setInterval(function () {\r\n");
      out.write("                    actualizar_anomalias()\r\n");
      out.write("                }, 3000);\r\n");
      out.write("\r\n");
      out.write("                function actualizar_anomalias() {\r\n");
      out.write("\r\n");
      out.write("                    var serial = $(\"#Serial\").val();\r\n");
      out.write("\r\n");
      out.write("                    $.ajax({\r\n");
      out.write("                        dataType: \"html\",\r\n");
      out.write("                        data: {\r\n");
      out.write("                            proceso: \"actualizar_anom\"\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                        },\r\n");
      out.write("                        type: \"POST\",\r\n");
      out.write("                        url: \"ControladorElemento\",\r\n");
      out.write("                        statusCode: {\r\n");
      out.write("                            404: function () {\r\n");
      out.write("                                alert(\"page not found\");\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    }).done(function (datos) {\r\n");
      out.write("                        $(\"#actualizar\").empty();\r\n");
      out.write("                        $(\"#actualizar\").append(datos);\r\n");
      out.write("                    });\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function list_anomalias() {\r\n");
      out.write("\r\n");
      out.write("                    var serial = $(\"#Serial\").val();\r\n");
      out.write("\r\n");
      out.write("                    $.ajax({\r\n");
      out.write("                        dataType: \"html\",\r\n");
      out.write("                        data: {\r\n");
      out.write("                            proceso: \"listar_anom\",\r\n");
      out.write("                            Serial: serial\r\n");
      out.write("\r\n");
      out.write("                        },\r\n");
      out.write("                        type: \"POST\",\r\n");
      out.write("                        url: \"ControladorElemento\",\r\n");
      out.write("                        statusCode: {\r\n");
      out.write("                            404: function () {\r\n");
      out.write("                                alert(\"page not found\");\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                    }).done(function (datos) {\r\n");
      out.write("                        $(\"#traer1\").empty();\r\n");
      out.write("                        $(\"#traer1\").append(datos);\r\n");
      out.write("                    });\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                var x;\r\n");
      out.write("                x = $(document);\r\n");
      out.write("                x.ready(inicializar);\r\n");
      out.write("\r\n");
      out.write("                function inicializar() {\r\n");
      out.write("                    var x = $(\"#mostrar\");\r\n");
      out.write("                    x.click(muestrame);\r\n");
      out.write("\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                function muestrame() {\r\n");
      out.write("                    var x = $(\"#objetivo\");\r\n");
      out.write("                    x.slideToggle(\"slow\");\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                $(document).on('click', '.input-remove-row', function () {\r\n");
      out.write("                    var tr = $(this).closest('tr');\r\n");
      out.write("                    tr.fadeOut(200, function () {\r\n");
      out.write("                        tr.remove();\r\n");
      out.write("\r\n");
      out.write("                    });\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                $(function () {\r\n");
      out.write("                    recibir();\r\n");
      out.write("\r\n");
      out.write("                    $('.preview-add-button').click(function () {\r\n");
      out.write("                        var form_data = {};\r\n");
      out.write("\r\n");
      out.write("                        if ($('.payment-form select[name=\"Seriales\"]').val() != \"\")\r\n");
      out.write("                        {\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("                            form_data[\"Seriales\"] = $('.payment-form select[name=\"Seriales\"]').val();\r\n");
      out.write("\r\n");
      out.write("                            form_data[\"remove-row\"] = '<span class=\"glyphicon glyphicon-remove\"></span>';\r\n");
      out.write("                            var row = $('<tr></tr>');\r\n");
      out.write("                            $.each(form_data, function (type, value) {\r\n");
      out.write("\r\n");
      out.write("                                $('<td class=\"input-' + type + '\"></td>').html(value).appendTo(row);\r\n");
      out.write("\r\n");
      out.write("                            });\r\n");
      out.write("                            $('.preview-table > tbody:last').append(row);\r\n");
      out.write("                        }\r\n");
      out.write("                        document.getElementById(\"Seriales\").value = \"\";\r\n");
      out.write("                    });\r\n");
      out.write("\r\n");
      out.write("                });\r\n");
      out.write("\r\n");
      out.write("                function xd() {\r\n");
      out.write("                    var textos = '';\r\n");
      out.write("                    for (var i = 0; i < document.getElementById('tbl').rows.length; i++) {\r\n");
      out.write("                        for (var j = 0; j < document.getElementById('tbl').rows[i].cells.length; j++)\r\n");
      out.write("                        {\r\n");
      out.write("                            if (j == 0 && i != 0) {\r\n");
      out.write("                                textos = textos + document.getElementById('tbl').rows[i].cells[j].innerHTML + '-';\r\n");
      out.write("                            }\r\n");
      out.write("                        }\r\n");
      out.write("                        textos = textos;\r\n");
      out.write("                    }\r\n");
      out.write("                    $(\"#serial\").val(textos);\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            </script> \r\n");
      out.write("    </body>\r\n");
      out.write("</html>\r\n");
      out.write("\r\n");
      out.write("\r\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
